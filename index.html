<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#1a1a2e" />
  <title>NovaFX Wallet</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#1a1a2e] text-white font-sans antialiased">
  <div class="w-full max-w-sm mx-auto mt-4 p-4 space-y-4">

    <!-- Balance Section -->
    <div class="bg-green-600 rounded-2xl p-4">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-2xl font-bold">$<span id="balance">10000.00</span></h2>
        <span class="text-xs">USD Account</span>
      </div>
      <div class="text-sm text-white space-y-1 mb-3">
        <p>Equity: $<span id="equity">10000</span></p>
        <p>Free Margin: $<span id="margin">10000</span></p>
        <p>Used Margin: $0</p>
        <p>P&L: <span id="pl" class="text-green-300">+0.00</span></p>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <button class="bg-green-700 py-2 rounded-xl font-semibold">Deposit</button>
        <button class="bg-green-700 py-2 rounded-xl font-semibold">Withdraw</button>
      </div>
    </div>

    <!-- Market Ticker -->
    <div class="bg-gray-900 rounded-2xl p-4">
      <h3 class="text-lg font-semibold mb-2">Forex Market</h3>
      <div class="space-y-2 text-sm">
        <div class="flex justify-between"><span>EUR/USD</span><span id="eurusd">1.0850</span></div>
        <div class="flex justify-between"><span>GBP/USD</span><span>1.2754</span></div>
        <div class="flex justify-between"><span>USD/JPY</span><span>156.24</span></div>
        <div class="flex justify-between"><span>USD/KES</span><span>139.10</span></div>
      </div>
    </div>

    <!-- TradingView Chart -->
    <div class="bg-blue-600 rounded-2xl p-4">
      <h3 class="text-lg font-semibold mb-2">Price Chart</h3>
      <div class="bg-blue-800 rounded-xl h-40 overflow-hidden">
        <iframe class="w-full h-full rounded-xl" src="https://s.tradingview.com/widgetembed/?frameElementId=tradingview_7c28c&symbol=FX:EURUSD&interval=1&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=f1f3f6&studies=[]&theme=dark&style=1&timezone=Etc/UTC&withdateranges=1&hideideas=1&studies_overrides={}&overrides={}" frameborder="0"></iframe>
      </div>
    </div>

    <!-- Open Trade Form -->
    <div class="bg-gray-900 rounded-2xl p-4">
      <h3 class="text-lg font-semibold mb-2">Open Trade</h3>
      <form class="space-y-2 text-sm">
        <select id="symbol" class="w-full p-2 rounded-lg bg-gray-700 text-white">
          <option value="EUR/USD">EUR/USD</option>
        </select>
        <input id="lot" type="number" placeholder="Lot Size" class="w-full p-2 rounded-lg bg-gray-700 text-white" value="1" min="0.01" step="0.01" />
        <div class="grid grid-cols-2 gap-2">
          <button type="button" onclick="openTrade('buy')" class="bg-green-600 py-2 rounded-xl font-semibold">Buy</button>
          <button type="button" onclick="openTrade('sell')" class="bg-red-600 py-2 rounded-xl font-semibold">Sell</button>
        </div>
      </form>
    </div>

    <!-- Open Trades Section -->
    <div class="bg-gray-800 rounded-2xl p-4">
      <h3 class="text-lg font-semibold mb-2">Open Trades</h3>
      <div class="space-y-2 text-sm" id="openTrades"></div>
    </div>

    <!-- Trade History Section -->
    <div class="bg-gray-800 rounded-2xl p-4">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-lg font-semibold">Trade History</h3>
      </div>
      <div class="space-y-4 text-sm" id="tradeHistory"></div>
    </div>

  </div>

  <script>
    let balance = 10000;
    let trades = [];
    let currentPrice = 1.0850;

    function updateUI() {
      document.getElementById("eurusd").textContent = currentPrice.toFixed(5);
      let pl = 0;
      let openHTML = "";
      trades.filter(t => !t.closed).forEach((trade, i) => {
        const diff = (currentPrice - trade.entry) * (trade.type === 'buy' ? 1 : -1);
        const profit = diff * trade.lot * 100000;
        pl += profit;
        trade.profit = profit;
        openHTML += `
          <div class='bg-gray-700 p-3 rounded-xl flex justify-between items-center'>
            <div>
              <p>${trade.symbol} - ${trade.type.toUpperCase()}</p>
              <p class='text-xs text-gray-400'>Lot: ${trade.lot} | P&L: <span class='${profit >= 0 ? 'text-green-400' : 'text-red-400'}'>${profit.toFixed(2)}</span></p>
            </div>
            <button onclick='closeTrade(${i})' class='bg-red-500 text-white text-xs px-2 py-1 rounded'>Close</button>
          </div>`;
      });
      document.getElementById("openTrades").innerHTML = openHTML;
      document.getElementById("pl").textContent = (pl >= 0 ? '+' : '') + pl.toFixed(2);
      document.getElementById("equity").textContent = (balance + pl).toFixed(2);
      document.getElementById("margin").textContent = (balance + pl).toFixed(2);

      const closed = trades.filter(t => t.closed);
      let histHTML = "";
      closed.forEach(trade => {
        histHTML += `
          <div class='flex justify-between items-center bg-gray-700 p-4 rounded-xl'>
            <div>
              <h4 class='font-medium'>${trade.symbol} - ${trade.type.toUpperCase()}</h4>
              <span class='text-xs text-gray-400'>Just now</span>
            </div>
            <span class='${trade.profit >= 0 ? 'text-green-400' : 'text-red-400'}'>${trade.profit.toFixed(2)}</span>
          </div>`;
      });
      document.getElementById("tradeHistory").innerHTML = histHTML;
    }

    function openTrade(type) {
      const lot = parseFloat(document.getElementById("lot").value);
      const symbol = document.getElementById("symbol").value;
      if (isNaN(lot) || lot <= 0) return alert("Invalid lot size");
      trades.push({ type, lot, symbol, entry: currentPrice, closed: false });
      updateUI();
    }

    function closeTrade(index) {
      const trade = trades[index];
      if (!trade || trade.closed) return;
      trade.closed = true;
      trade.exit = currentPrice;
      balance += trade.profit;
      updateUI();
    }

    // Simulate price changes
    setInterval(() => {
      const rnd = (Math.random() - 0.5) * 0.0005;
      currentPrice += rnd;
      updateUI();
    }, 1000);

    updateUI();
  </script>
</body>
</html>
